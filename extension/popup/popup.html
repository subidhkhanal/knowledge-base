<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <h1><span class="logo">B</span> BrainForge</h1>

    <!-- Scrape status indicator -->
    <div class="status" id="scrape-status">Detecting conversation...</div>

    <!-- Publish form -->
    <label for="title">Title</label>
    <input
      type="text"
      id="title"
      placeholder="e.g., Understanding Hybrid Search"
    />

    <label for="tags">Tags (comma separated)</label>
    <input type="text" id="tags" placeholder="e.g., rag, search, embeddings" />

    <label for="mode">Mode</label>
    <select id="mode">
      <option value="new">Publish New Article</option>
      <option value="update">Update Existing</option>
    </select>

    <div id="slug-group">
      <label for="existing-slug">Select Article to Update</label>
      <select id="existing-slug">
        <option value="">Loading...</option>
      </select>
    </div>

    <button id="publish-btn" class="btn primary" disabled>Publish</button>

    <a href="" id="view-kb-link" target="_blank">
      <button class="btn secondary">Open Knowledge Base</button>
    </a>

    <!-- Result / error areas -->
    <div id="result" class="result"></div>
    <div id="error" class="error-box"></div>

    <!-- Auth status -->
    <div class="status" id="auth-status">Not logged in</div>

    <!-- Collapsible settings -->
    <details>
      <summary>Settings</summary>

      <label for="username">Username</label>
      <input type="text" id="username" placeholder="Your KB username" />

      <label for="password">Password</label>
      <input type="password" id="password" placeholder="Your KB password" />

      <button class="btn primary" id="login-btn">Login</button>

      <label for="backend-url">Backend URL</label>
      <input
        type="text"
        id="backend-url"
        value="https://pkb-backend.onrender.com"
      />
      <label for="frontend-url">Frontend URL</label>
      <input
        type="text"
        id="frontend-url"
        value="https://personal-assistant-olive.vercel.app"
      />
      <button class="btn secondary" id="save-settings">Save Settings</button>
    </details>

    <script src="popup.js"></script>
  </body>
</html>
