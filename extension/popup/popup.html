<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Vollkorn:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <!-- ═══ Auth View ═══ -->
    <div id="auth-view" class="view">
      <h1><span class="logo">C</span> Chat to Webpage</h1>

      <div class="auth-tabs">
        <button class="auth-tab active" data-tab="login">Login</button>
        <button class="auth-tab" data-tab="register">Register</button>
      </div>

      <div id="auth-status" class="status"></div>

      <label for="auth-username">Username</label>
      <input
        type="text"
        id="auth-username"
        placeholder="Your username"
        autocomplete="username"
      />

      <label for="auth-password">Password</label>
      <input
        type="password"
        id="auth-password"
        placeholder="Your password"
        autocomplete="current-password"
      />

      <label for="auth-groq-key">Groq API Key</label>
      <input
        type="password"
        id="auth-groq-key"
        placeholder="gsk_..."
      />
      <p class="helper-text">
        Free at <a href="https://console.groq.com" target="_blank">console.groq.com</a>
      </p>

      <button id="auth-submit-btn" class="btn primary">Login</button>
    </div>

    <!-- ═══ Main View ═══ -->
    <div id="main-view" class="view hidden">
      <div class="header-bar">
        <h1><span class="logo">C</span> Chat to Webpage</h1>
        <div class="user-info">
          <span id="display-username" class="username-badge"></span>
          <button id="logout-btn" class="btn-icon" title="Logout">Logout</button>
        </div>
      </div>

      <!-- Scrape status -->
      <div class="status" id="scrape-status">Detecting conversation...</div>

      <!-- Publish form -->
      <label for="title">Title</label>
      <input
        type="text"
        id="title"
        placeholder="e.g., Understanding Hybrid Search"
      />

      <label for="tags">Tags (comma separated)</label>
      <input type="text" id="tags" placeholder="e.g., rag, search, embeddings" />

      <label for="mode">Mode</label>
      <select id="mode">
        <option value="new">Publish New Article</option>
        <option value="update">Update Existing</option>
      </select>

      <div id="slug-group">
        <label for="existing-slug">Select Article to Update</label>
        <select id="existing-slug">
          <option value="">Loading...</option>
        </select>
      </div>

      <button id="publish-btn" class="btn primary" disabled>Publish</button>

      <a href="" id="view-kb-link" target="_blank">
        <button class="btn secondary">Open Projects</button>
      </a>

      <!-- Result / error areas -->
      <div id="result" class="result"></div>
      <div id="error" class="error-box"></div>

      <!-- Settings -->
      <details id="settings-section">
        <summary>Settings</summary>

        <label for="settings-groq-key">Groq API Key</label>
        <input
          type="password"
          id="settings-groq-key"
          placeholder="gsk_..."
        />
        <p class="helper-text">
          Free at <a href="https://console.groq.com" target="_blank">console.groq.com</a>
        </p>
        <button id="save-groq-key-btn" class="btn secondary">Save Key</button>
      </details>
    </div>

    <script src="popup.js"></script>
  </body>
</html>
